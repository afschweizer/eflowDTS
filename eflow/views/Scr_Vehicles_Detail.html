
<script type="text/javascript">

  $(document).ready(function(){
    $(".prev-slide").click(function(){
        $("#detail").carousel('prev');
    });
});
  $(document).ready(function(){
    $(".next-slide").click(function(){
        $("#detail").carousel('next');
    });
});
</script>
<div id="Contents" ng-controller="Scr_Vehicles_Detail_Controller" ng-init="init()"> 
    
  <div class="box ">
                <div class="box-header with-border bg-blue">
                  <h3 class="box-title"><b>Resumen</b></h3>
                  <div class="box-tools pull-right">
                    <button class="btn btn-box-tool" data-toggle="tooltip" title="Mostrar/ Ocultar" ng-click="Show_Summary = !Show_Summary">
                      <i class="glyphicon glyphicon-sort"></i></button>
                  </div>
                </div><!-- /.box-header -->
                <div class="box-body no-padding">
                      <div class="pad">
                      
                         <div ng-show="Show_Summary">
    
    <div class="row" >
			<div class="col-md-3 col-sm-6 col-xs-12">
              <div class="info-box bg-blue">
                <span class="info-box-icon "><i class="fa fa-truck"></i></span>
                <div class="info-box-content">
                  <span class="info-box-text">{{User.UserName}}</span>
                  <span class="info-box-number">{{User.ID_Truck}}</span>
                </div><!-- /.info-box-content -->
              </div><!-- /.info-box -->
            </div><!-- /.col -->
         <div class="col-md-3 col-sm-6 col-xs-12">
              <div class="info-box bg-teal">
                <span class="info-box-icon "><i class="fa fa-home"></i></span>
                <div class="info-box-content">
                  <span class="info-box-text">Puntos Visita</span>
                  <span class="info-box-number">{{(ArrayJobs).length}}</span>
                </div><!-- /.info-box-content -->
              </div><!-- /.info-box -->
            </div><!-- /.col -->			
			<div class="col-md-3 col-sm-6 col-xs-12">
              <div class="info-box bg-olive">
                <span class="info-box-icon"><i class="fa fa-bar-chart-o"></i></span>
                <div class="info-box-content">
                  <span class="info-box-text">Completado</span>
                  <!--
                          <div class="progress progress-xs progress-striped active">
                             <div class="progress-bar bg-teal" style="width:{{(1*100)/((ArrayJobs).length )}}%"><b style="color:#000">{{(1*100)/((ArrayJobs).length )| number:2}}%</b></div>
                          </div>
                  -->
                  <span class="info-box-number">{{((ArrayJobs).length - (ArrayJobs | filter:  {'Visit_State': 'In_Process'} :true).length)/((ArrayJobs).length)*100 | number:1}}%</span>
                  <div class="progress">
                    <div class="progress-bar" style="width:{{(1*100)/((ArrayJobs).length )}}%"></div>
                  </div>
                  <span class="progress-description">
                 {{((ArrayJobs).length - (ArrayJobs | filter:  {'Visit_State': 'In_Process'} :true).length)/((ArrayJobs).length)*100 | number:0}}% Completado
                  </span>
                </div><!-- /.info-box-content -->
              </div><!-- /.info-box -->
            </div><!-- /.col -->
			<div class="col-md-3 col-sm-6 col-xs-12">
              <div class="info-box bg-aqua">
                <span class="info-box-icon"><i class="fa fa-list-alt"></i></span>
                <div class="info-box-content">
                  <span class="info-box-text">Estadística</span>
                  <span class="info-box-number">
                    {{((ArrayJobs).length - (ArrayJobs | filter:  {'Visit_State': 'In_Process'} :true).length)}} de {{(ArrayJobs).length}}</span>
				   <div class="progress">
                    <div class="progress-bar" style="width: 50%"></div>
                  </div>
				  <span class="progress-description">
                    Trabajos Realizados
                  </span>
                </div><!-- /.info-box-content -->
              </div><!-- /.info-box -->
            </div><!-- /.col -->
     </div>
  			
    <div class="row" >
  			<div class="col-md-3 col-sm-6 col-xs-12">
              <div class="info-box" style=" background-color: #A9E2F3;">
                <span class="info-box-icon"><i class="glyphicon glyphicon-road"></i></span>
                <div class="info-box-content">
                  <span class="info-box-text">En Proceso</span>
                  <span class="info-box-number">{{(ArrayJobs | filter:  {'Visit_State': 'In_Process'} :true).length}}</span>
                </div><!-- /.info-box-content -->
              </div><!-- /.info-box -->
            </div><!-- /.col -->
         <div class="col-md-3 col-sm-6 col-xs-12">
                        <div class="info-box" style="background-color: #F5A9A9;">
                          <span class="info-box-icon"><i class="fa fa-close"></i></span>
                          <div class="info-box-content">
                            <span class="info-box-text">Abortados</span>
                            <span class="info-box-number">{{(ArrayJobs | filter:  {'Visit_State': 'Aborted'} :true).length}}</span>
                          </div><!-- /.info-box-content -->
                        </div><!-- /.info-box -->
</div><!-- /.col -->            
         <div class="col-md-3 col-sm-6 col-xs-12">
                        <div class="info-box " style="background-color: #F2F5A9;">
                          <span class="info-box-icon"><i class="glyphicon glyphicon-adjust"></i></span>
                          <div class="info-box-content">
                            <span class="info-box-text">Parciales</span>
                            <span class="info-box-number">{{(ArrayJobs | filter:  {'Visit_State': 'Partial'} :true).length}}</span>
                          </div><!-- /.info-box-content -->
                        </div><!-- /.info-box -->
</div><!-- /.col -->
         <div class="col-md-3 col-sm-6 col-xs-12">
                        <div class="info-box" style="background-color: #D0F5A9;">
                          <span class="info-box-icon"><i class="fa fa-check"></i></span>
                          <div class="info-box-content">
                            <span class="info-box-text">Finalizados</span>
                            <span class="info-box-number">{{(ArrayJobs | filter:  {'Visit_State': 'Finalized'} :true).length}}</span>
                          </div><!-- /.info-box-content -->
                        </div><!-- /.info-box -->
</div><!-- /.col -->
     </div>			
 
  </div>
								
                      </div>
                </div><!-- /.box-body -->
              </div>
  
    <!--  <div class="row" >
      Rastreo de Camión
			<div class="col-md-12 col-sm-12 col-xs-12">
		 		 <div class="box ">
                <div class="box-header with-border bg-blue">
                  <h3 class="box-title"><b>Lista Puntos de Visita</b></h3>
                 <div class="box-tools pull-right">
                    <button class="btn btn-box-tool" data-toggle="tooltip" title="Mostrar/ Ocultar" ng-click="Show_Summary = !Show_Summary">
                      <i class="glyphicon glyphicon-sort"></i></button>
                  </div>
                </div>
                 <div class="box-body no-padding" >
                  <table class="table table-responsive table-striped table-hover">
                    <tbody>
                    <tr class="bg-aqua"style="width: 10px">
                       <th >Dirección</th><th class="bg-aqua"style="width: 10px">Encargado</th>
              <td class="text-left" > {{PV.Manager}}</td>
                    </tr>
					  </tbody>
					</table>
					<table class="table table-responsive table-striped table-hover">
						<tbody>
                    <tr class="bg-teal">
                       <th style="width: 10px">#</th>
                       <th>Producto</th>
                       <th>Cantidad</th>
                       <th>Porcentaje</th>
                    </tr>
                    <tr ng-repeat="job in PV.Jobs">
                       <td ng-click="PV_Info_Prod(job)">{{$index+1}}</td>
                       <td class="text-left" ng-click="PV_Info_Prod(job)">{{job.JobName}}</td>
                       <td ng-click="PV_Info_Prod(job)">{{job.Quantity}}</td>
                       <td>
                          <div class="progress progress-xs progress-striped active">
                             <div class="progress-bar bg-teal" style="width:{{((job.Quantity_Register*100)/job.Quantity)}}%"><b style="color:#000">{{(job.Quantity_Register*100)/job.Quantity}}%</b></div>
                          </div>
                       </td>
                    </tr>
					  </tbody>
					</table>
                </div>
              </div>
           </div>
       
           </div>-->
  
     <div class="row" >
       <!--Rastreo de Camión-->
			<div class="col-md-8 col-sm-8 col-xs-12">
		 		 <div class="box ">
                <div class="box-header with-border bg-blue">
                  <h3 class="box-title"><b>Rastreo de Camión</b></h3>
                 <div class="box-tools pull-right">
                    <button class="btn btn-box-tool" data-toggle="tooltip" title="Refrescar" ng-click="init()"><i class="glyphicon glyphicon-refresh"></i></button>
                  </div>
                </div><!-- /.box-header -->
                <div class="box-body no-padding" >
                      <div class="pad"  >
                        <!-- Map will be created here -->
                        <div id="world-map-markers" style="height: 320px;">
							<div class="jvectormap-container"  style="width: 100%; height: 100%; position: relative; overflow: hidden; background-color: transparent;">
								<div id="Map_Dashboard"  style="height: 320px;">
								
								</div>
							</div>
						</div>
                      </div>
                </div><!-- /.box-body -->
              </div>
           </div>
       
       
       <!--Rastreo de insidentes-->
			<!--<div class="col-md-6 col-sm-6 col-xs-12" ng-show="Punto_Visita_incidentes">
		 		 <div class="box box-success">
                <div class="box-header with-border bg-blue">
                  <h3 class="box-title">Rastreo de Incidentes</h3>
                        <div class="box-tools pull-right">
                    <button class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
                  </div>
                </div>
                <div class="box-body no-padding">
                      <div class="pad">
                        <div id="world-map-markers" style="height: 450px;">
							<div class="jvectormap-container" style="width: 100%; height: 100%; position: relative; overflow: hidden; background-color: transparent;">
								<div id="Map_Dashboard" style="height: 450px;">
								
								</div>
							</div>
						</div>
                      </div>
                </div>
              </div>
           </div> -->
       
           <!--Detalle Rastreo de Camión-->
		<!--	<div class="col-md-3 col-sm-3 col-xs-12" >
            <div class="box ">
                <div class="box-header bg-blue">
                  <h3 class="box-title"><b>Detalle {{Prod.JobName}}</b></h3>
                  <div class="box-tools pull-right">
                    <button class="btn btn-box-tool" data-toggle="tooltip" title="Mostrar/ Ocultar" ng-click="Show_Detail = !Show_Detail"><i class="glyphicon glyphicon-sort"></i></button>
                  </div>
                </div>
                <div class="box-body no-padding">
					<table class="table table-responsive table-striped table-hover">
						<tbody>
                    <tr class="bg-teal">
                       <th style="width: 10px">#</th>
                       <th>Nombre</th>
                       <th>Dirección</th>
                    </tr>
                    <tr ng-repeat="jobs in ArrayJobs">
                       <td>{{$index+1}}</td>
                       <td>{{jobs.Name}}</td>
                       <td>{{jobs.Address}} </td>
					  </tbody>
					</table>
                </div>
              </div>
              </div>-->
            
       <!--Notificación-->
        <div class="col-md-4 col-sm-4 col-xs-12">
            <div class="box ">
                <div class="box-header bg-blue">
                  <h3 class="box-title"><b>Notificación</b></h3>
                  <div class="box-tools pull-right">
                  </div>
                </div><!-- /.box-header -->
                <!-- form start -->
                <form class="form-horizontal" >
                  <div class="box-body">
                    <div class="form-group"><br/>
                      <label for="inputPassword3" class="col-sm-2 control-label"><span class="glyphicon glyphicon-text-color" data-toggle="tooltip" title="Asunto del Mensaje"></span>Asunto</label>
                      <div class="col-sm-10">    <br/>                          
                        <textarea class="form-control" id="Asunto" rows="02" style="width: 95%;" ng-model="TextAsunto" placeholder="Asunto"></textarea>
                        <br/> </div>
                    </div>
                    <div class="form-group">
                     
                      <label for="inputPassword3" class="col-sm-2 control-label"> <span class="glyphicon glyphicon-envelope" data-toggle="tooltip" title="Detalle del Mensaje"></span>Detalle</label>
                      <div class="col-sm-10">
                        <textarea class="form-control" id="Message" rows="05" style="width: 95%;" ng-model="TextMessage" placeholder="Mensaje"></textarea>
                      </div>
                    </div>
                  </div><!-- /.box-body -->
                  <div class="box-footer">
                    <button type="reset" value="Reset" class="btn btn-primary"> Limpiar</button>
                    <button type="submit" class="btn btn-primary pull-right" ng-click="Message(TextAsunto,TextMessage)" > Enviar</button>
                  </div><!-- /.box-footer -->
                </form>
              </div><!-- /.box -->
              
            </div><!--/.col (right) -->
       
           </div>
     <div class="row" >
       <!--Puntos de Visita-->
			<div class="col-md-4 col-sm-4 col-xs-12" ng-show="Show_Punto_Visita">
            <div class="box ">
                <div class="box-header bg-blue">
                  <h3 class="box-title"><b>Punto de Visita {{PV.Name}}</b></h3>
                  <div class="box-tools pull-right">
                    <button class="btn btn-box-tool"  data-toggle="tooltip" title="Mostrar/ Ocultar" ng-click="Show_PV = !Show_PV"><i class="glyphicon glyphicon-sort"></i></button>
                  </div>
                </div><!-- /.box-header -->
                <div class="box-body no-padding" ng-show="Show_PV">
                  <table class="table table-responsive table-striped table-hover">
                    <tbody>
                    <tr >
                       <th class="bg-aqua"style="width: 10px">Dirección</th>
              <td class="text-left" > {{PV.Address}}</td>
                       </tr>
                    <tr >
                       <th class="bg-aqua"style="width: 10px">Encargado</th>
              <td class="text-left" > {{PV.Manager}}</td>
                       </tr>
                    <tr >
                       <th class="bg-aqua"style="width: 10px">Correo </th>
              <td class="text-left" > {{PV.Mail}}</td>
                       </tr>
                    <tr >
                       <th class="bg-aqua"style="width: 10px">Teléfono</th>
              <td class="text-left" > {{PV.Telephone_Number}}</td>
                       </tr>
                    <tr ng-show="Show_Certificate">
                      <th class="bg-aqua"style="width: 10px">Certificado</th>
              <td> <button class="btn btn-primary pull-right" ng-click="Download_Certificate(PV);">Descargar PDF</button></td>
                       </tr>
					  </tbody>
					</table>
					<table class="table table-responsive table-striped table-hover">
						<tbody>
                    <tr class="bg-teal">
                       <th style="width: 10px">#</th>
                       <th>Producto</th>
                       <th>Cantidad</th>
                       <th>Porcentaje</th>
                    </tr>
                    <tr ng-repeat="job in PV.Jobs">
                       <td ng-click="PV_Info_Prod(job)">{{$index+1}}</td>
                       <td class="text-left" ng-click="PV_Info_Prod(job)">{{job.JobName}}</td>
                       <td ng-click="PV_Info_Prod(job)">{{job.Quantity}}</td>
                       <td>
                          <div class="progress progress-xs progress-striped active">
                             <div class="progress-bar bg-teal" style="width:{{((job.Quantity_Register*100)/job.Quantity)}}%"><b style="color:#000">{{(job.Quantity_Register*100)/job.Quantity}}%</b></div>
                          </div>
                       </td>
                    </tr>
					  </tbody>
					</table>
                </div><!-- /.box-body -->
              </div>
		    
         
              </div>
       
       <!--Detalle Producto-->
			<div class="col-md-4 col-sm-4 col-xs-12" ng-show="Show_Detail_Prod">
            <div class="box ">
                <div class="box-header bg-blue">
                  <h3 class="box-title"><b>Detalle {{Prod.JobName}}</b></h3>
                  <div class="box-tools pull-right">
                    <button class="btn btn-box-tool" data-toggle="tooltip" title="Mostrar/ Ocultar" ng-click="Show_Detail = !Show_Detail"><i class="glyphicon glyphicon-sort"></i></button>
                  </div>
                </div><!-- /.box-header -->
                <div class="box-body no-padding" ng-show="Show_Detail">
                  <table class="table table-responsive table-striped table-hover">
                    <tbody>
                    <tr >
                       <th class="bg-aqua"style="width: 10px">Producto</th>
              <td> {{Prod.JobName}}</td>
                       </tr>
                   
					  </tbody>
					</table>
					<table class="table table-responsive table-striped table-hover">
						<tbody>
                    <tr class="bg-teal">
                       <th style="width: 10px">#</th>
                       <th>Acción</th>
                       <th>Cantidad</th>
                       <th>Notas</th>
            
                    </tr>
                    <tr ng-repeat="jobs in Prod.JobActions">
                       <td>{{$index+1}}</td>
                       <td>{{jobs.Action_Type}}</td>
                       <td>{{jobs.Quantity}} </td>  
              <td>
                        <span>
            <a class="btn btn-primary span4" ng-click="Open_Modal_Add_VisitPoint(jobs)" data-toggle="tooltip" title="Agregar una tarea" >
              Visualizar</a>
      </span>
                      </td>
                    
                    </tr>
					  </tbody>
					</table>
                </div><!-- /.box-body -->
              </div>
		    
         
              </div>
              <!--Detalle Incidentes-->
			<div class="col-md-4 col-sm-4 col-xs-12" ng-show="Show_Incidentes">
            <div class="box ">
                <div class="box-header bg-blue">
                  <h3 class="box-title"><b>Detalle De Incidentes</b></h3>
                  <div class="box-tools pull-right">
                    <button class="btn btn-box-tool" data-toggle="tooltip" title="Mostrar/ Ocultar" ng-click="Show_Inc = !Show_Inc"><i class="glyphicon glyphicon-sort"></i></button>
                  </div>
                </div><!-- /.box-header -->
                <div class="box-body no-padding" ng-show="Show_Inc">
					<table class="table table-responsive table-striped table-hover">
						<tbody>
                    <tr class="bg-teal">
                       <th style="width: 10px">#</th>
                       <th>Tipo</th>
                       <th>Descripción</th>
                       <th>Notas</th>
                    </tr>
                    <tr ng-repeat="jobs in PV.Visit_Point_Incidents">
                       <td>{{$index+1}}</td>
                       <td class="text-left" >{{jobs.Problems_Option}}</td>
                       <td class="text-left" >{{jobs.Detail}}</td>
                      <td>
                        <span>
            <a class="btn btn-primary span4" ng-click="Open_Modal_Add_VisitPoint(jobs)" data-toggle="tooltip" title="Agregar una tarea" >
              Visualizar</a>
      </span>
                      </td><!-- 
                       <td ng-show="Show_Button">  
                        <a ng-click="See_Info(jobs)" class=" small-box-footer ">
                            <i class="fa fa-arrow-circle-right"></i>
                          </a>
                         
                       </td>
                      <td ng-show="Show_Note">
                        {{jobs.Notes}}</td>-->
                    </tr>
					  </tbody>
					</table>
                </div><!-- /.box-body -->
              </div>
		    
         
              </div>
     </div>
		
  
  
     <div id="Modal_Add_VisitPoint" class="modal fade"  role="dialog" >
    <div class="modal-dialog modal-lg"  style="width: 40%;" >
        <!-- Modal content-->
        <div class="modal-content" >
			<div class="modal-header" style="background-color:#4096c6;color:#fff">
				<h2 class="modal-title">Notas </h2>
            </div>
            <div class="modal-body">
         <div class="box box-solid">
            <div class="box-header with-border">
              		<table class="table table-responsive table-striped table-hover">
						<tbody>
                    <tr class="bg-teal">
                       <th>Notas Problema con</th>
                       <th>Ubicación Latitud</th>
                       <th>Ubicación Longitud</th>
                       <th>Fecha</th>
                       <th>hora</th>
                    </tr>
                    <tr>
                       <td>{{Incidents.Problems_Option}}</td>
                       <td>{{Incidents.Latitude}}</td>
                       <td>{{Incidents.Longitude}}</td>
                       <td>{{Incidents.Date| date:"dd/MM/yyyy"}}</td>
                       <td>{{Incidents.Date| date:"h:mma"}}</td>
                    </tr>
					  </tbody>
					</table>
            </div>
            </div>
			    <div class="form-group">
               
         <div class="box box-solid">
          
            <div class="box-body">
       
              
        <div id="detail" class="carousel slide" data-ride="carousel" data-interval="2000">

        <ol class="carousel-indicators">
            <li data-target="#detail" data-ng-repeat="img in Incidents.Notes" data-ng-class="{active : $first}" data-slide-to="{{$index}}"></li>
        </ol>
        <div class="carousel-inner" role="listbox" >
            <div class="item" data-ng-repeat="image in Incidents.Notes"  style="position: relative; width: 100%; font-size: 0px; line-height: 0; max-height: 100%; overflow: hidden;" data-ng-class="{active : $first}">
                <img data-ng-src="{{image.Photo}}" alt=" carousel {{$index}}"  style="width: 100%; height:50%"/> 
             	 <div class="carousel-caption" style="background-color: rgba(0, 0, 0, 0.5)">
              			<h1 style="color:#fff">        {{image.Description}}
                      </h1>
            </div>
            </div> 
        </div>
    </div>
              
              
              <!--
              
               <div id="dynamiccontentcarousel" class="carousel slide" data-ride="carousel" data-interval="2000">

        <ol class="carousel-indicators">
            <li data-target="#dynamiccontentcarousel" data-ng-repeat="img in images" data-ng-class="{active : $first}" data-slide-to="{{$index}}"></li>
        </ol>

        <div class="carousel-inner" role="listbox">
            <div class="item" data-ng-repeat="image in images" data-ng-class="{active : $first}">
                <img data-ng-src="{{image}}" alt=" carousel {{$index}}" />
            </div>
        </div>
    </div>
               -->
              <!--
                <div id="detail" data-interval="3000"class="carousel slide" data-ride="carousel">
                    <ol class="carousel-indicators">
						      <li data-target="#detail" data-slide-to="0" class="active"></li>
								<li ng-repeat="objs in Incidents.Notes"class="" data-target="#detail" data-slide-to="{{$index+1}}"></li>
                    </ol>
                    <div class="carousel-inner">
                      
                      <div class="item active">

        					<img src="images/Captura.PNG" align="left" alt="900x500">
                        <div class="carousel-caption">
                        
                        </div>
                      </div>
                      <div  class="item" ng-repeat="obj in Incidents.Notes" >
                         <img src="{{obj.Photo}}" alt="{{obj.Description}}">
                      <div class="carousel-caption" >                         
                        <h1 style="color:#000">
                          {{obj.Description}}
                        </h1>    
                      </div>
                      </div>
                    </div>
                </div>   -->
      
  <a class="left carousel-control" href="#detail" role="button" data-slide="prev">
    <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
    <span class="sr-only">Previous</span>
  </a>
  <a class="right carousel-control" href="#detail" role="button" data-slide="next">
    <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
    <span class="sr-only">Next</span>
  </a>
            </div>
        </div>
      </div>
   </div>  
      <div class="modal-footer">
            <a class="btn btn-primary glyphicon glyphicon-remove" data-toggle="tooltip" title="Cerrar"  style="background-color:#295C7A" data-dismiss="modal"><b> Cerrar</b></a>
    </div>
        </div>
	</div>  
</div>
  
  
  
 
  
  
  
</div>

